{
  "type": "json_schema",
  "schema": {
    "type": "object",
    "properties": {
      "contracts": {
        "type": "array",
        "description": "One entry per contract in architecture.contracts[] - use exact names",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Kebab-case identifier derived from name, e.g., 'voter-contract'"
            },
            "name": {
              "type": "string",
              "description": "PascalCase contract name - MUST match architecture.contracts[].name exactly"
            },
            "purpose": {
              "type": "string",
              "description": "One-sentence description of what this contract validates"
            },
            "code": {
              "type": "string",
              "description": "Complete valid CashScript code. MUST use \\n for newlines between statements. Example: 'pragma cashscript ^0.13.0;\\n\\ncontract Foo {\\n  function bar() {\\n    require(true);\\n  }\\n}'"
            },
            "role": {
              "type": "string",
              "enum": ["primary", "helper", "state"],
              "description": "Map Phase 2 role: container/minting/independent→primary, sidecar/function→helper"
            }
          },
          "required": ["id", "name", "purpose", "code", "role"],
          "additionalProperties": false
        }
      }
    },
    "required": ["contracts"],
    "additionalProperties": false
  }
}
